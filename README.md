# t-bot

Telegram - бот для учета расходов. Личных и семейных.

## Функциональность

### Запись расходов

Расходами считается любое сообщение, состоящие из числовой и буквенной части. 

Суммой затраты считается первый числовой блок `\d+`. 

Вся текстовая часть сообщения считается описанием расхода. По описанию определяется категория расхода. Категории фиксированы и не могут быть изменены пользователем:

1. продукты
1. автомобиль
1. развлечения
1. красота

### Отмена последнего добавления расхода

Запись последнего расхода можно отменить с помощью ключевых слов `'отменить','отмена'`. При получении такой команды последний записанныё расход будет удален из базы. 

**Операция не обратима!**

Следует учитывать, что операция отмены может отменять сколько угодно записей. Т.е. повторяя команды можно полностью очистить базу.

### Очистка базы расходов

Для удаления всех записанных расходов можно использовать ключевые слова `'очистить','удалить','стереть'`. Очистка выполняется сразу при получении команды, подтверждения не требуется.

### Вывод расходов

Выполняется текстовыми командами - `'получить','показать','затраты'` и прочими ключевыми словами. При отправке только ключевого слово будут выведены все расходы.

Дополнительно можно указать "модификаторы" - ключевые слова, обозначающие необходимость группировки данных или добавление информации из связанных аккаунтов. Доступны модификаторы:

1. Группировки по дате. Ключевые слова `'дате','дату','датам'`. 
1. Группировки по категории. Ключевые слова `'категории', 'группе', 'категориям', 'группам'`.
1. Вывода всей информации. Ключевые слова `'все','всё','полностью'`.
1. Подключения информации связанных аккаунтов. Ключевые слова `'связанные','доступные','аккаунтам'` и другие.
1. Агрегации (сумма) данных по связанным аккаунтам. Ключевое слово  `'вместе'`.

Можно использовать несколько модификаторов одновременно. Они будут применены в порядке следования в тексте сообщения.

Следующие запросы на получение данных вынесены на клавиатуру бота:

1. Показать все
1. Показать по категории
1. Показать по дате
1. Показать по аккаунтам
1. Показать по категории и дате
1. Показать по аккаунтам и категории
1. Показать по аккаунтам и категории вместе

Если необходимого запроса нет в списке, его можно написать в виде сообщения.

### Объединение аккаунтов

Связь с аккаунтом дает доступ к его базе расходов. Выполняется командой `'связать'`. Удалить связь можно командой `'отвязать'`. Идентифкатор связываемого/отвязываемого аккаунта должен быть указан в видже целого числа. Примеры запросов: `связать с аккаунтом 1234456`, `отвязать 1234456`.

Для получения доступа необходима взаимная связь аккаунтов!
